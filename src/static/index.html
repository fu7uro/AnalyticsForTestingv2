<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Futuro AI Analytics Portal</title>
    <link rel="icon" type="image/png" href="https://ik.imagekit.io/futuro2025/Futuro%20Favicon%20PNG%20file.png?updatedAt=1753154675049">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        * {
            font-family: 'Inter', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #000000 0%, #0A0A0A 50%, #1A1A1A 100%);
            min-height: 100vh;
            color: #ffffff;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            box-shadow: 0 0 40px rgba(139, 92, 246, 0.2);
        }
        
        .dashboard-title {
            background: linear-gradient(135deg, #8B5CF6 0%, #EC4899 50%, #8B5CF6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
            letter-spacing: -0.025em;
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(139, 92, 246, 0.3);
            transition: all 0.3s ease;
        }
        
        .metric-card:hover {
            border-color: #8B5CF6;
            box-shadow: 0 0 20px rgba(139, 92, 246, 0.3);
            transform: translateY(-2px);
        }
        
        .conversation-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(139, 92, 246, 0.2);
            transition: all 0.3s ease;
        }
        
        .conversation-card:hover {
            border-color: #8B5CF6;
            box-shadow: 0 0 15px rgba(139, 92, 246, 0.2);
        }
        
        .btn-action {
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-action:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .status-completed {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-transferred {
            background: linear-gradient(135deg, #F59E0B, #D97706);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .logout-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #8B5CF6, #EC4899);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            z-index: 1000;
        }
        
        .logout-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(139, 92, 246, 0.3);
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
        }
        
        .modal-content {
            background: #1a1a1a;
            color: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 90%;
            max-height: 90%;
            overflow-y: auto;
            border: 2px solid #8b5cf6;
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 1px solid #333;
            padding-bottom: 15px;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: #8b5cf6;
            font-size: 24px;
            cursor: pointer;
            padding: 5px;
        }
        
        .modal-close:hover {
            color: #ec4899;
        }
        
        .chart-container {
            position: relative;
            height: 300px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
        }
        
        .loading {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px;
            color: #8B5CF6;
        }
        
        .loading-spinner {
            border: 2px solid rgba(139, 92, 246, 0.3);
            border-radius: 50%;
            border-top: 2px solid #8B5CF6;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            margin-right: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            padding: 16px 24px;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .notification.show {
            opacity: 1;
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10B981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #EF4444, #DC2626);
        }
        
        .notification.warning {
            background: linear-gradient(135deg, #F59E0B, #D97706);
        }
    </style>
</head>
<body>
    <!-- Logout Button -->
    <button class="logout-btn" id="logoutBtn">
        <i class="fas fa-sign-out-alt"></i> Logout
    </button>

    <!-- Main Dashboard -->
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <img src="https://ik.imagekit.io/futuro2025/Futuro%20PNG%20logo.png?updatedAt=1745564371467" 
                 alt="Futuro Corp Logo" 
                 class="h-16 mx-auto mb-4">
            <h1 class="dashboard-title text-4xl font-bold mb-2" id="dashboardTitle">
                Analytics Dashboard
            </h1>
            <p class="text-gray-400" id="agentDescription">
                Loading agent information...
            </p>
        </div>

        <!-- Loading State -->
        <div id="loadingState" class="loading">
            <div class="loading-spinner"></div>
            <span>Loading analytics data...</span>
        </div>

        <!-- Dashboard Content -->
        <div id="dashboardContent" style="display: none;">
          <!-- Analytics Time Period Tabs -->
        <div class="bg-gray-800/50 backdrop-blur-sm rounded-xl p-6 mb-8">
            <div class="flex flex-wrap gap-4 mb-6">
                <button id="tab-today" class="analytics-tab active px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-purple-600 text-white">
                    📊 Today
                </button>
                <button id="tab-7days" class="analytics-tab px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-gray-700 text-gray-300 hover:bg-gray-600">
                    📈 Last 7 Days
                </button>
                <button id="tab-30days" class="analytics-tab px-6 py-3 rounded-lg font-semibold transition-all duration-300 bg-gray-700 text-gray-300 hover:bg-gray-600">
                    📅 Last 30 Days
                </button>
            </div>
            
            <!-- Time-based Analytics Content -->
            <div id="analytics-content" class="space-y-6">
                <!-- Loading state -->
                <div id="analytics-loading" class="text-center py-8">
                    <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"></div>
                    <p class="text-gray-400">Loading analytics data...</p>
                </div>
                
                <!-- Analytics will be populated here -->
                <div id="analytics-data" class="hidden">
                    <!-- Performance Metrics Row -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400 text-sm">Total Calls</p>
                                    <p id="metric-total-calls" class="text-2xl font-bold text-white">-</p>
                                </div>
                                <div class="text-blue-500">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-2">
                                <span id="metric-total-change" class="text-sm text-green-500">+0%</span>
                                <span class="text-gray-500 text-sm">vs previous period</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400 text-sm">Success Rate</p>
                                    <p id="metric-success-rate" class="text-2xl font-bold text-white">-</p>
                                </div>
                                <div class="text-green-500">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-2">
                                <span id="metric-success-change" class="text-sm text-green-500">+0%</span>
                                <span class="text-gray-500 text-sm">vs previous period</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400 text-sm">Avg Duration</p>
                                    <p id="metric-avg-duration" class="text-2xl font-bold text-white">-</p>
                                </div>
                                <div class="text-yellow-500">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-2">
                                <span id="metric-duration-change" class="text-sm text-green-500">+0%</span>
                                <span class="text-gray-500 text-sm">vs previous period</span>
                            </div>
                        </div>
                        
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-gray-400 text-sm">Evaluation Score</p>
                                    <p id="metric-eval-score" class="text-2xl font-bold text-white">-</p>
                                </div>
                                <div class="text-purple-500">
                                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="mt-2">
                                <span id="metric-eval-change" class="text-sm text-green-500">+0%</span>
                                <span class="text-gray-500 text-sm">vs previous period</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-white mb-4">📈 Performance Trend</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="performance-trend-chart"></canvas>
                            </div>
                        </div>
                        
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-white mb-4">📈 Caller Interest Rating</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="evaluation-criteria-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Additional Charts Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-white mb-4">⏱️ Call Duration Distribution</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="duration-distribution-chart"></canvas>
                            </div>
                        </div>
                        
                        <div class="bg-gray-900/50 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-white mb-4">📊 Call Outcomes</h3>
                            <div style="position: relative; height: 300px;">
                                <canvas id="call-outcomes-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Comparative Analytics Section -->
                    <div class="bg-gray-900/50 rounded-lg p-6 mb-8">
                        <h3 class="text-lg font-semibold text-white mb-6">🔍 Performance Insights & Trends</h3>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <!-- Trend Analysis -->
                            <div class="space-y-4">
                                <h4 class="text-md font-medium text-gray-300">📈 Trend Analysis</h4>
                                <div id="trend-insights" class="space-y-3">
                                    <!-- Trend insights will be populated here -->
                                </div>
                            </div>
                            
                            <!-- Performance Benchmarks -->
                            <div class="space-y-4">
                                <h4 class="text-md font-medium text-gray-300">🎯 Performance Benchmarks</h4>
                                <div id="performance-benchmarks" class="space-y-3">
                                    <!-- Benchmarks will be populated here -->
                                </div>
                            </div>
                        </div>
                        
                        <!-- Key Recommendations -->
                        <div class="mt-6 pt-6 border-t border-gray-700">
                            <h4 class="text-md font-medium text-gray-300 mb-4">💡 Key Recommendations</h4>
                            <div id="recommendations" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Recommendations will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Top Performing Conversations -->
                    <div class="bg-gray-900/50 rounded-lg p-6">
                        <h3 class="text-lg font-semibold text-white mb-6">⭐ Top Performing Conversations</h3>
                        <div id="top-conversations" class="space-y-4">
                            <!-- Top conversations will be populated here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Existing Analytics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">            <div class="metric-card rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm font-medium">Total Conversations</p>
                            <p class="text-3xl font-bold text-white metric-total-conversations">0</p>
                        </div>
                        <div class="bg-purple-500 bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-comments text-purple-400 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm font-medium">Success Rate</p>
                            <p class="text-3xl font-bold text-white metric-success-rate">0%</p>
                        </div>
                        <div class="bg-green-500 bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-check-circle text-green-400 text-xl"></i>
                        </div>
                    </div>
                </div>

                <div class="metric-card rounded-lg p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-400 text-sm font-medium">Avg Call Duration</p>
                            <p class="text-3xl font-bold text-white metric-positive-sentiment">0%</p>
                        </div>
                        <div class="bg-pink-500 bg-opacity-20 p-3 rounded-full">
                            <i class="fas fa-heart text-pink-400 text-xl"></i>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Charts Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                <div class="glass-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 text-white">Call Volume (Last 7 Days)</h3>
                    <div class="chart-container">
                        <canvas id="callVolumeChart"></canvas>
                    </div>
                </div>

                <div class="glass-card rounded-lg p-6">
                    <h3 class="text-xl font-semibold mb-4 text-white">📈 Call Success Rate Trend</h3>
                    <div class="chart-container">
                        <canvas id="callSuccessRateChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Conversations List -->
            <div class="glass-card rounded-lg p-6">
                <h3 class="text-xl font-semibold mb-6 text-white">Recent Conversations</h3>
                <div id="conversationsList" class="space-y-4">
                    <!-- Conversations will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="static/assets/app.js"></script>
    <script>
        // Chart instances
        let callVolumeChart = null;
        let callSuccessRateChart = null;
        
        // Update call volume chart
        function updateCallVolumeChart(data) {
            const ctx = document.getElementById('callVolumeChart').getContext('2d');
            
            if (callVolumeChart) {
                callVolumeChart.destroy();
            }
            
            callVolumeChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.map(d => d.day),
                    datasets: [{
                        label: 'Calls',
                        data: data.map(d => d.calls),
                        borderColor: '#8B5CF6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        borderWidth: 3,
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#8B5CF6',
                        pointBorderColor: '#ffffff',
                        pointBorderWidth: 2,
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#ffffff'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: '#ffffff'
                            }
                        }
                    }
                }
            });
        }
        
        // Update call success rate chart
        function updateCallSuccessRateChart(data) {
            const ctx = document.getElementById('callSuccessRateChart').getContext('2d');
            
            if (callSuccessRateChart) {
                callSuccessRateChart.destroy();
            }
            
            callSuccessRateChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels || [],
                    datasets: [{
                        label: 'Success Rate (%)',
                        data: data.success_rates || [],
                        borderColor: '#10B981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        fill: true,
                        tension: 0.4,
                        pointBackgroundColor: '#10B981',
                        pointBorderColor: '#059669',
                        pointBorderWidth: 2,
                        pointRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: { color: '#E5E7EB' }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const dataPoint = data.details ? data.details[context.dataIndex] : null;
                                    if (dataPoint) {
                                        return [
                                            `Success Rate: ${context.parsed.y.toFixed(1)}%`,
                                            `Successful Calls: ${dataPoint.successful_calls}`,
                                            `Total Calls: ${dataPoint.total_calls}`
                                        ];
                                    }
                                    return `Success Rate: ${context.parsed.y.toFixed(1)}%`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: { color: '#9CA3AF' },
                            grid: { color: 'rgba(75, 85, 99, 0.3)' }
                        },
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { 
                                color: '#9CA3AF',
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: { color: 'rgba(75, 85, 99, 0.3)' }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>

